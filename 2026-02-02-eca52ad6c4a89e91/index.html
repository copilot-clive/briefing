<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morning Briefing | Bernhard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-main: #0d0d1a;
            --bg-card: #1a1a2e;
            --bg-card-inner: #252540;
            --border: rgba(255, 255, 255, 0.08);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.4);
            --accent-green: #4ade80;
            --accent-red: #f87171;
            --accent-cyan: #22d3ee;
            --accent-pink: #f472b6;
            --accent-orange: #fb923c;
            --accent-purple: #a29bfe;
            --radius: 20px;
            --radius-sm: 12px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 40px 24px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 40px; }
        .header-emoji { font-size: 3rem; margin-bottom: 16px; }
        .header h1 {
            font-size: 2.5rem; font-weight: 700;
            background: linear-gradient(135deg, #22d3ee, #a78bfa);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }
        .header .date { font-size: 1rem; color: var(--text-secondary); margin-bottom: 4px; }
        .header .greeting { font-size: 0.9rem; color: var(--text-muted); }
        
        /* Net Worth Banner */
        .net-worth-banner {
            background: linear-gradient(135deg, #1a1a2e 0%, #2d2d4a 100%);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 28px 32px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        .net-worth-main { }
        .net-worth-label { font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        .net-worth-value { font-size: 3rem; font-weight: 800; margin-top: 4px; }
        .net-worth-breakdown { display: flex; gap: 32px; }
        .breakdown-item { text-align: right; }
        .breakdown-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; }
        .breakdown-value { font-size: 1.4rem; font-weight: 600; margin-top: 2px; }
        
        .dashboard { display: grid; grid-template-columns: 1.3fr 1fr; gap: 20px; }
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
        }
        .card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
        .card-icon {
            width: 40px; height: 40px;
            border-radius: var(--radius-sm);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem;
        }
        .card-icon.green { background: rgba(74, 222, 128, 0.15); }
        .card-icon.cyan { background: rgba(34, 211, 238, 0.15); }
        .card-icon.orange { background: rgba(251, 146, 60, 0.15); }
        .card-icon.pink { background: rgba(244, 114, 182, 0.15); }
        .card-icon.purple { background: rgba(167, 139, 250, 0.15); }
        .card-title { font-size: 1rem; font-weight: 600; }
        .card-subtitle { font-size: 0.75rem; color: var(--text-muted); }
        
        .stock-row {
            display: grid;
            grid-template-columns: 90px 1fr 90px 70px 90px;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            gap: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .stock-row:hover { background: rgba(255,255,255,0.02); margin: 0 -12px; padding-left: 12px; padding-right: 12px; }
        .stock-row:last-child { border-bottom: none; }
        .stock-symbol { font-weight: 700; font-size: 0.95rem; }
        .stock-shares { font-size: 0.7rem; color: var(--text-muted); }
        .stock-value { font-weight: 600; text-align: right; font-size: 0.9rem; }
        .stock-change { font-size: 0.75rem; font-weight: 600; text-align: right; }
        .stock-change.up { color: var(--accent-green); }
        .stock-change.down { color: var(--accent-red); }
        .stock-spark { width: 90px; height: 28px; }
        
        .crypto-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .crypto-item {
            background: var(--bg-card-inner);
            border-radius: var(--radius-sm);
            padding: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .crypto-item:hover { background: #2d2d50; }
        .crypto-item .name { font-weight: 600; font-size: 0.9rem; }
        .crypto-item .sub { font-size: 0.65rem; color: var(--text-muted); }
        .crypto-item .row { display: flex; justify-content: space-between; align-items: baseline; margin-top: 6px; }
        .crypto-item .price { font-size: 1rem; font-weight: 700; }
        .crypto-item .change { font-size: 0.75rem; font-weight: 600; }
        .green { color: var(--accent-green); }
        .red { color: var(--accent-red); }
        
        .row-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .news-list { display: flex; flex-direction: column; gap: 10px; }
        .news-item {
            display: flex; align-items: flex-start; gap: 10px;
            padding: 12px;
            background: var(--bg-card-inner);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s;
        }
        .news-item:hover { background: #2d2d50; }
        .news-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent-orange); margin-top: 5px; flex-shrink: 0; }
        .news-text { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.4; }
        
        .motivation-card {
            grid-column: span 2;
            margin-top: 20px;
            background: linear-gradient(135deg, var(--bg-card) 0%, #2d2d4a 100%);
        }
        .quote-text { font-size: 1.05rem; font-style: italic; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px; }
        .quote-author { font-size: 0.8rem; color: var(--text-muted); }
        
        .footer { text-align: center; padding: 40px 0 16px; }
        .footer-crab { font-size: 2rem; margin-bottom: 8px; }
        .footer-text { font-size: 0.7rem; color: var(--text-muted); }
        
        /* Modal */
        .modal-overlay {
            display: none; position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 1000;
            justify-content: center;
            align-items: flex-start;
            padding: 40px 24px;
            overflow-y: auto;
        }
        .modal-overlay.active { display: flex; }
        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            max-width: 700px; width: 100%;
        }
        .modal-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: flex-start;
            position: sticky; top: 0;
            background: var(--bg-card);
            border-radius: var(--radius) var(--radius) 0 0;
        }
        .modal-title { font-size: 1.3rem; font-weight: 700; }
        .modal-subtitle { font-size: 0.85rem; color: var(--text-muted); margin-top: 4px; }
        .modal-close {
            background: var(--bg-card-inner); border: none;
            color: var(--text-muted);
            width: 36px; height: 36px;
            border-radius: 8px; cursor: pointer;
            font-size: 1.4rem;
            display: flex; align-items: center; justify-content: center;
        }
        .modal-close:hover { background: var(--accent-red); color: white; }
        .modal-body { padding: 24px; }
        .modal-section { margin-bottom: 24px; }
        .modal-section:last-child { margin-bottom: 0; }
        .modal-section h4 {
            font-size: 0.75rem; color: var(--accent-cyan);
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px;
            display: flex; align-items: center; gap: 8px;
        }
        .modal-section h4::before { content: ''; width: 4px; height: 14px; background: var(--accent-cyan); border-radius: 2px; }
        .modal-section p { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        .modal-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .modal-stat { background: var(--bg-card-inner); padding: 12px 10px; border-radius: 8px; text-align: center; }
        .modal-stat .label { font-size: 0.6rem; color: var(--text-muted); text-transform: uppercase; }
        .modal-stat .value { font-size: 1rem; font-weight: 600; margin-top: 3px; }
        .sentiment-bar { display: flex; gap: 3px; margin-top: 10px; }
        .sentiment-bar .bar { height: 6px; border-radius: 3px; }
        .sentiment-bar .bar.buy { background: var(--accent-green); }
        .sentiment-bar .bar.hold { background: var(--accent-orange); }
        .sentiment-bar .bar.sell { background: var(--accent-red); }
        .sentiment-labels { display: flex; justify-content: space-between; margin-top: 6px; font-size: 0.65rem; color: var(--text-muted); }
        .tech-levels { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
        .tech-level { display: flex; justify-content: space-between; padding: 8px 10px; background: var(--bg-card-inner); border-radius: 6px; font-size: 0.8rem; }
        .tech-level .label { color: var(--text-muted); }
        .tech-level .value { font-weight: 600; }
        .news-card { background: var(--bg-card-inner); border-radius: 8px; padding: 12px; margin-bottom: 8px; }
        .news-card:last-child { margin-bottom: 0; }
        .news-card .headline { font-size: 0.85rem; font-weight: 500; color: var(--text-primary); margin-bottom: 4px; }
        .news-card .meta { font-size: 0.7rem; color: var(--text-muted); display: flex; gap: 10px; }
        .news-card .source { color: var(--accent-cyan); }
        .modal-sources { padding: 16px 24px; background: var(--bg-card-inner); border-top: 1px solid var(--border); border-radius: 0 0 var(--radius) var(--radius); }
        .modal-sources h4 { font-size: 0.65rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; }
        .modal-sources a { display: inline-block; font-size: 0.75rem; color: var(--accent-cyan); text-decoration: none; margin-right: 14px; }
        .modal-sources a:hover { text-decoration: underline; }
        
        @media (max-width: 900px) {
            .dashboard { grid-template-columns: 1fr; }
            .row-2 { grid-template-columns: 1fr; }
            .motivation-card { grid-column: span 1; }
            .net-worth-banner { flex-direction: column; text-align: center; }
            .net-worth-breakdown { justify-content: center; }
            .breakdown-item { text-align: center; }
            .stock-row { grid-template-columns: 70px 1fr 70px; }
            .stock-shares, .stock-spark { display: none; }
            .modal-stats { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-emoji">üëã</div>
            <h1>Morning Briefing</h1>
            <p class="date">Monday, February 2, 2026</p>
            <p class="greeting">Good morning, Bernhard. Here's your daily snapshot.</p>
        </header>
        
        <!-- Net Worth Banner -->
        <div class="net-worth-banner">
            <div class="net-worth-main">
                <div class="net-worth-label">Total Net Worth</div>
                <div class="net-worth-value" id="net-worth">$0</div>
            </div>
            <div class="net-worth-breakdown">
                <div class="breakdown-item">
                    <div class="breakdown-label">Stocks</div>
                    <div class="breakdown-value" id="stocks-total">$0</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-label">Crypto</div>
                    <div class="breakdown-value" id="crypto-total">$0</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-label">Cash</div>
                    <div class="breakdown-value">$27.3K</div>
                </div>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon green">üìà</div>
                    <div>
                        <div class="card-title">Stock Portfolio</div>
                        <div class="card-subtitle">IBKR Holdings</div>
                    </div>
                </div>
                <div id="stocks-list"></div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon orange">ü™ô</div>
                    <div>
                        <div class="card-title">Crypto Portfolio</div>
                        <div class="card-subtitle">Binance Holdings</div>
                    </div>
                </div>
                <div class="crypto-grid" id="crypto-grid"></div>
            </div>
        </div>
        
        <div class="row-2">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon pink">üåç</div>
                    <div>
                        <div class="card-title">Middle East Briefing</div>
                        <div class="card-subtitle">Key developments</div>
                    </div>
                </div>
                <div class="news-list" id="news-list"></div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-icon cyan">üì∞</div>
                    <div>
                        <div class="card-title">Market News</div>
                        <div class="card-subtitle">Top stories</div>
                    </div>
                </div>
                <div class="news-list" id="market-news"></div>
            </div>
        </div>
        
        <div class="card motivation-card">
            <div class="card-header">
                <div class="card-icon purple">üí°</div>
                <div>
                    <div class="card-title">Daily Motivation</div>
                    <div class="card-subtitle">Start the week strong</div>
                </div>
            </div>
            <p class="quote-text">"The only way to do great work is to love what you do. If you haven't found it yet, keep looking. Don't settle."</p>
            <p class="quote-author">‚Äî Steve Jobs</p>
        </div>
        
        <footer class="footer">
            <div class="footer-crab">ü¶Ä</div>
            <p class="footer-text">Generated by Clive ¬∑ Last updated 05:03 AM</p>
        </footer>
    </div>
    
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <div>
                    <div class="modal-title" id="modal-title">Title</div>
                    <div class="modal-subtitle" id="modal-subtitle">Subtitle</div>
                </div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-sources" id="modal-sources"></div>
        </div>
    </div>
    
    <script>
        const DATA = {
            cash: 27300,
            stocks: {
                'VOO': { 
                    shares: 491.7527, price: 635.18, change: 0.42,
                    name: 'Vanguard S&P 500 ETF', type: 'ETF',
                    data: [628, 630, 632, 634, 635.18],
                    marketCap: '$1.2T AUM', pe: '24.5', expenseRatio: '0.03%', weekHigh: '$650', weekLow: '$520', dividend: '1.32%',
                    technical: { trend: 'Bullish', rsi: 55, support: '$620', resistance: '$650', sma50: '$615', sma200: '$580', signal: 'Core holding‚Äîcontinue accumulating on dips' },
                    sentiment: { rating: 'Core Hold', buy: 0, hold: 100, sell: 0, avgTarget: 'N/A', highTarget: 'N/A', lowTarget: 'N/A', summary: 'VOO tracks the S&P 500‚Äîthe benchmark index. Low-cost passive exposure to 500 largest US companies. Your largest position at $312K.' },
                    news: [
                        { headline: 'S&P 500 ETFs see record inflows in January 2026', source: 'Bloomberg', time: '2 days ago' },
                        { headline: 'Vanguard cuts expense ratios on key ETFs', source: 'Reuters', time: '1 week ago' },
                        { headline: 'Index funds outperform 90% of active managers in 2025', source: 'Morningstar', time: '5 days ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/VOO' }, { name: 'Vanguard', url: 'https://investor.vanguard.com/etf/profile/VOO' }]
                },
                'NVDA': { 
                    shares: 610.844, price: 188.52, change: 1.10,
                    name: 'NVIDIA Corporation',
                    data: [185.70, 186.47, 187.24, 188.00, 188.52],
                    marketCap: '$4.59T', pe: '46.78', eps: '$4.03', weekHigh: '$212.19', weekLow: '$86.62', avgVolume: '184.4M',
                    technical: { trend: 'Consolidating', rsi: 52, support: '$185.70', resistance: '$195.50', sma50: '$178.40', sma200: '$142.80', signal: 'Neutral‚Äîwait for breakout above $195' },
                    sentiment: { rating: 'Outperform', buy: 52, hold: 6, sell: 1, avgTarget: '$253.19', highTarget: '$320.00', lowTarget: '$135.00', summary: 'Your 2nd largest position. H200 China approval is major catalyst. Earnings Feb 25 critical. 826% 3-year return reflects AI dominance.' },
                    news: [
                        { headline: 'NVIDIA receives approval to sell H200 chips in China', source: 'Yahoo Finance', time: '5 days ago' },
                        { headline: '3 catalysts that could drive NVIDIA stock higher', source: 'Yahoo Finance', time: '1 week ago' },
                        { headline: 'Earnings Feb 25 could determine AI trade trajectory', source: 'Bloomberg', time: '3 days ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/NVDA' }, { name: 'Reuters', url: 'https://www.reuters.com/technology/nvidia/' }]
                },
                'GOOGL': { 
                    shares: 70.6559, price: 338.00, change: -0.07,
                    name: 'Alphabet Inc.',
                    data: [332.29, 338.25, 334.32, 339.95, 338.00],
                    marketCap: '$4.09T', pe: '33.43', eps: '$10.11', weekHigh: '$342.29', weekLow: '$140.53', avgVolume: '35.3M',
                    technical: { trend: 'Bullish', rsi: 55, support: '$332.29', resistance: '$342.29', sma50: '$315.80', sma200: '$285.20', signal: 'Strong uptrend‚Äîbuy pullbacks to $332' },
                    sentiment: { rating: 'Buy', buy: 38, hold: 15, sell: 2, avgTarget: '$344.47', highTarget: '$400.00', lowTarget: '$280.00', summary: 'Waymo $16B funding at $110B valuation. Earnings Feb 4 key catalyst. 68.93% 1-year return.' },
                    news: [
                        { headline: 'Waymo reportedly raising $16B at $110B valuation', source: 'Yahoo Finance', time: '3 days ago' },
                        { headline: 'Project Genie gaining traction in gaming', source: 'The Verge', time: '5 days ago' },
                        { headline: 'Earnings due Feb 4‚ÄîYouTube and Cloud in focus', source: 'Reuters', time: '2 days ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/GOOGL' }, { name: 'Reuters', url: 'https://www.reuters.com/technology/google/' }]
                },
                'TSLA': { 
                    shares: 45.7073, price: 430.41, change: 3.32,
                    name: 'Tesla Inc.',
                    data: [398.20, 416.57, 417.89, 425.58, 430.41],
                    marketCap: '$1.62T', pe: '398.53', eps: '$1.08', weekHigh: '$498.83', weekLow: '$214.25', avgVolume: '74.4M',
                    technical: { trend: 'Volatile/Bullish', rsi: 62, support: '$416.57', resistance: '$439.88', sma50: '$385.20', sma200: '$312.40', signal: 'Momentum strong, watch for pullbacks to $416' },
                    sentiment: { rating: 'Hold', buy: 18, hold: 22, sell: 8, avgTarget: '$418.89', highTarget: '$550.00', lowTarget: '$85.00', summary: '$20B spending plan signals pivot to AI/robotaxi. Q4 beat but annual revenue dropped 3%‚Äîfirst ever decline. $2B xAI investment.' },
                    news: [
                        { headline: 'Tesla invests $2B in Musk\'s xAI, Cybercab on track', source: 'Reuters', time: '4 days ago' },
                        { headline: 'Q4 beats but annual revenue drops 3%', source: 'CNBC', time: '3 days ago' },
                        { headline: 'Model S and X production ending within months', source: 'NY Times', time: '3 days ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/TSLA' }, { name: 'Reuters', url: 'https://www.reuters.com/business/autos-transportation/tesla/' }]
                },
                'META': { 
                    shares: 21.0519, price: 672.97, change: 0.09,
                    name: 'Meta Platforms Inc.',
                    data: [664.66, 672.36, 674.65, 676.82, 672.97],
                    marketCap: '$1.70T', pe: '29.76', eps: '$22.61', weekHigh: '$796.25', weekLow: '$479.80', avgVolume: '19.3M',
                    technical: { trend: 'Neutral', rsi: 48, support: '$664.66', resistance: '$696.82', sma50: '$685.20', sma200: '$612.50', signal: 'Wait for earnings clarity before adding' },
                    sentiment: { rating: 'Buy', buy: 45, hold: 10, sell: 2, avgTarget: '$832.78', highTarget: '$1,117.00', lowTarget: '$685.00', summary: 'Strong fundamentals but AI spending concerns. Q4 earnings critical.' },
                    news: [
                        { headline: 'Meta Q4 earnings preview: AI spending scrutiny', source: 'Yahoo Finance', time: '2 days ago' },
                        { headline: 'Corning-Meta undersea cable deal announced', source: 'Yahoo Finance', time: '3 days ago' },
                        { headline: 'Analysts see 24% upside despite concerns', source: 'Seeking Alpha', time: '1 week ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/META' }, { name: 'Reuters', url: 'https://www.reuters.com/technology/meta/' }]
                },
                'AMZN': { 
                    shares: 60.3272, price: 244.68, change: 2.63,
                    name: 'Amazon.com Inc.',
                    data: [238.08, 238.42, 239.68, 242.50, 244.68],
                    marketCap: '$2.62T', pe: '34.61', eps: '$7.07', weekHigh: '$258.60', weekLow: '$161.38', avgVolume: '44.6M',
                    technical: { trend: 'Bullish', rsi: 58, support: '$238.08', resistance: '$258.60', sma50: '$235.40', sma200: '$208.90', signal: 'Breakout potential‚Äîwatch $258 for new highs' },
                    sentiment: { rating: 'Overweight', buy: 48, hold: 8, sell: 1, avgTarget: '$296.06', highTarget: '$340.00', lowTarget: '$200.00', summary: 'Restructuring with 16K job cuts. AWS AgentCore launch targets enterprise AI. Earnings Feb 5.' },
                    news: [
                        { headline: 'Amazon closing Fresh/Go stores, focus on delivery', source: 'Yahoo Finance', time: '4 days ago' },
                        { headline: '16,000 job cuts as restructuring continues', source: 'Yahoo Finance', time: '3 days ago' },
                        { headline: 'AWS AgentCore services launching', source: 'Reuters', time: '1 week ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/AMZN' }, { name: 'Reuters', url: 'https://www.reuters.com/technology/amazon/' }]
                },
                'AAPL': { 
                    shares: 55.1933, price: 259.48, change: 0.46,
                    name: 'Apple Inc.',
                    data: [252.18, 255.16, 256.20, 258.28, 259.48],
                    marketCap: '$3.81T', pe: '32.89', eps: '$7.89', weekHigh: '$288.62', weekLow: '$169.21', avgVolume: '46.6M',
                    technical: { trend: 'Bullish', rsi: 58, support: '$252.18', resistance: '$261.90', sma50: '$248.50', sma200: '$225.30', signal: 'Buy on dips near support' },
                    sentiment: { rating: 'Overweight', buy: 28, hold: 8, sell: 2, avgTarget: '$290.90', highTarget: '$350.00', lowTarget: '$205.00', summary: 'Q1 beat expectations. JPMorgan raised PT to $315. Revenue guidance 13-16% growth.' },
                    news: [
                        { headline: 'Apple Q1 beats: Revenue $143.76B, guides 13-16% growth', source: 'CNBC', time: '2 days ago' },
                        { headline: 'JPMorgan raises price target to $315', source: 'CNBC', time: '1 week ago' },
                        { headline: 'Apple declares $0.26 dividend, $54B cash flow', source: 'StockTitan', time: '3 days ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/AAPL' }, { name: 'CNBC', url: 'https://www.cnbc.com/quotes/AAPL' }]
                },
                'MSFT': { 
                    shares: 25.7869, price: 430.29, change: -0.74,
                    name: 'Microsoft Corporation',
                    data: [426.45, 433.50, 439.17, 431.20, 430.29],
                    marketCap: '$3.20T', pe: '26.96', eps: '$15.96', weekHigh: '$555.45', weekLow: '$344.79', avgVolume: '27.2M',
                    technical: { trend: 'Bearish short-term', rsi: 42, support: '$426.45', resistance: '$439.47', sma50: '$448.30', sma200: '$425.60', signal: 'Caution‚Äîbelow 50-day MA' },
                    sentiment: { rating: 'Overweight', buy: 42, hold: 12, sell: 1, avgTarget: '$599.58', highTarget: '$650.00', lowTarget: '$420.00', summary: 'Azure growth 23% but AI capex concerns. Copilot adoption strong. 0.85% dividend yield.' },
                    news: [
                        { headline: 'Microsoft Q2: 23% net income growth, Azure concerns', source: 'CNBC', time: '3 days ago' },
                        { headline: 'Tech sell-off hits Microsoft despite fundamentals', source: 'Yahoo Finance', time: '2 days ago' },
                        { headline: 'Copilot enterprise adoption exceeds expectations', source: 'Reuters', time: '1 week ago' }
                    ],
                    sources: [{ name: 'Yahoo Finance', url: 'https://finance.yahoo.com/quote/MSFT' }, { name: 'Reuters', url: 'https://www.reuters.com/technology/microsoft/' }]
                }
            },
            crypto: {
                'BTC': { amount: 0.607, price: 77499, change: 1.72, name: 'Bitcoin', value: 47042,
                    technical: { trend: 'Correcting', rsi: 45, support: '$74,000', resistance: '$82,000' },
                    sentiment: 'Neutral‚Äîprofit-taking after January rally to $105K. ETF outflows $1.2B this week.',
                    news: [{ headline: 'Bitcoin drops below $80K amid risk-off', source: 'CoinDesk', time: '1 day ago' }, { headline: 'Spot ETF outflows $1.2B this week', source: 'Bloomberg', time: '2 days ago' }, { headline: 'Fed rate path in focus', source: 'Reuters', time: '1 day ago' }],
                    sources: [{ name: 'CoinDesk', url: 'https://www.coindesk.com/price/bitcoin' }]
                },
                'USDC': { amount: 2.40, price: 1.00, change: 0, name: 'USD Coin', value: 2.40,
                    technical: { trend: 'Stable', rsi: 50, support: '$1.00', resistance: '$1.00' },
                    sentiment: 'Stablecoin‚Äî1:1 USD peg. Circle-issued, fully reserved.',
                    news: [{ headline: 'Circle USDC reserves fully audited', source: 'Circle', time: '1 week ago' }],
                    sources: [{ name: 'Circle', url: 'https://www.circle.com/usdc' }]
                },
                'ETH': { amount: 11.33, price: 2293.09, change: 6.45, name: 'Ethereum', value: 25981,
                    technical: { trend: 'Rebounding', rsi: 48, support: '$2,150', resistance: '$2,500' },
                    sentiment: 'Cautiously optimistic‚Äîbouncing from oversold. Layer 2 activity strong.',
                    news: [{ headline: 'Ethereum rebounds 4% at support', source: 'CoinDesk', time: '1 day ago' }, { headline: 'Pectra upgrade Q2 2026', source: 'The Block', time: '1 week ago' }],
                    sources: [{ name: 'CoinDesk', url: 'https://www.coindesk.com/price/ethereum' }]
                },
                'ADA': { amount: 0.37, price: 0.29, change: -2.96, name: 'Cardano', value: 0.11,
                    technical: { trend: 'Recovering', rsi: 42, support: '$0.75', resistance: '$0.90' },
                    sentiment: 'Mixed‚Äîecosystem growth continues but price lagging BTC.',
                    news: [{ headline: 'Cardano DeFi TVL reaches new high', source: 'CoinDesk', time: '3 days ago' }],
                    sources: [{ name: 'CoinDesk', url: 'https://www.coindesk.com/price/cardano' }]
                },
                'XRP': { amount: 0.47, price: 1.59, change: -3.49, name: 'XRP', value: 0.74,
                    technical: { trend: 'Neutral', rsi: 46, support: '$0.48', resistance: '$0.58' },
                    sentiment: 'Waiting on SEC case final resolution. Ripple partnerships expanding.',
                    news: [{ headline: 'Ripple expands APAC partnerships', source: 'CoinTelegraph', time: '2 days ago' }],
                    sources: [{ name: 'CoinDesk', url: 'https://www.coindesk.com/price/xrp' }]
                },
                'OTHER': { amount: 0, price: 0, change: -2.5, name: 'Dust (15+ coins)', value: 5,
                    technical: { trend: 'Mixed', rsi: 50, support: 'Varies', resistance: 'Varies' },
                    sentiment: 'Dust positions: BNB $3, USDC $2, XRP $0.74, USDT, TRX, ETHW, DAI, ADA, XLM, TRUMP, DOGE, HIVE, SHIB, ENJ, ICX, LUNC. Total <$10.',
                    news: [],
                    sources: []
                }
            },
            meNews: [
                { headline: 'Trump orders aircraft carrier to Middle East as US-Iran tensions soar', summary: 'Carrier strike group deployed as diplomatic efforts continue. Arab states navigating strategic tightrope.', context: 'Saudi Arabia, Gulf states and Israel prioritizing own interests amid rising tensions. Framework for US-Iran talks reportedly in development.', related: [{ headline: 'Arab states navigate US-Iran tensions', source: 'DW' }, { headline: 'Iran says talks structure in making', source: 'Xinhua' }], sources: [{ name: 'Al Jazeera', url: 'https://www.aljazeera.com/live' }] },
                { headline: 'Twin explosions hit Iran amid regional tensions', summary: 'Explosions reported in Iran. Israeli security officials say "not ours." Assessment: likely internal incident.', context: 'Comes amid heightened tensions with US and Israel. Iran continues enrichment activities.', related: [{ headline: 'Israel denies involvement', source: 'Kan TV' }], sources: [{ name: 'Xinhua', url: 'https://english.news.cn' }] },
                { headline: 'Syria-SDF ceasefire extended 15 days', summary: 'Fragile ceasefire between Syrian government and Kurdish-led SDF extended. Negotiations ongoing.', context: 'Turkey remains key player. Integration deal still being implemented.', related: [{ headline: 'SDF negotiations continue', source: 'Al Jazeera' }], sources: [{ name: 'Al Jazeera', url: 'https://www.aljazeera.com/live' }] },
                { headline: 'Trump nominated for Nobel Peace Prize for Gaza peace efforts', summary: 'Bosnia nominates Trump for 2026 Nobel Peace Prize. Canada praises Qatar, Egypt, Turkey mediation.', context: 'First official nomination for 2026 edition. Gaza death toll exceeds 100K injured, unprecedented child amputee crisis.', related: [{ headline: 'Gaza humanitarian crisis deepens', source: 'UN' }], sources: [{ name: 'Wikipedia', url: 'https://en.wikipedia.org/wiki/Gaza_peace_plan' }] }
            ],
            marketNews: [
                { headline: 'Bitcoin rebounds +1.72%, ETH surges +6.45% as risk appetite returns', source: 'CoinDesk' },
                { headline: 'Tesla pivoting to robotics and AI as vehicle sales decline', source: 'Yahoo Finance' },
                { headline: 'NVIDIA China chip approval could boost revenue projections', source: 'Yahoo Finance' },
                { headline: 'Markets closed Monday ‚Äî next trading day Feb 3', source: 'NYSE' }
            ]
        };
        
        const stockOrder = ['VOO', 'NVDA', 'GOOGL', 'TSLA', 'META', 'AMZN', 'AAPL', 'MSFT'];
        const cryptoOrder = ['BTC', 'ETH', 'OTHER'];
        
        // Calculate totals
        let stocksTotal = DATA.cash;
        stockOrder.forEach(sym => { stocksTotal += DATA.stocks[sym].shares * DATA.stocks[sym].price; });
        let cryptoTotal = 0;
        cryptoOrder.forEach(sym => { cryptoTotal += DATA.crypto[sym].value; });
        const netWorth = stocksTotal + cryptoTotal;
        
        document.getElementById('net-worth').textContent = '$' + (netWorth / 1000).toFixed(0) + 'K';
        document.getElementById('stocks-total').textContent = '$' + (stocksTotal / 1000).toFixed(0) + 'K';
        document.getElementById('crypto-total').textContent = '$' + (cryptoTotal / 1000).toFixed(0) + 'K';
        
        // Render stocks
        const stocksList = document.getElementById('stocks-list');
        stockOrder.forEach((sym, idx) => {
            const s = DATA.stocks[sym];
            const value = s.shares * s.price;
            const isUp = s.change >= 0;
            const row = document.createElement('div');
            row.className = 'stock-row';
            row.onclick = () => openModal('stock', sym);
            row.innerHTML = `
                <div><div class="stock-symbol">${sym}</div><div class="stock-shares">${s.shares.toFixed(2)} shares</div></div>
                <div class="stock-value">$${(value/1000).toFixed(1)}K</div>
                <div class="stock-change ${isUp ? 'up' : 'down'}">${isUp ? '‚Üë' : '‚Üì'} ${Math.abs(s.change).toFixed(2)}%</div>
                <div class="stock-spark"><canvas id="spark-${sym}"></canvas></div>
            `;
            stocksList.appendChild(row);
            setTimeout(() => {
                const ctx = document.getElementById(`spark-${sym}`);
                if (ctx) new Chart(ctx.getContext('2d'), { type: 'line', data: { labels: s.data.map((_,i)=>i), datasets: [{ data: s.data, borderColor: isUp ? '#4ade80' : '#f87171', backgroundColor: 'transparent', tension: 0.4, borderWidth: 2, pointRadius: 0 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } } });
            }, idx * 40);
        });
        
        // Render crypto
        const cryptoGrid = document.getElementById('crypto-grid');
        cryptoOrder.forEach(sym => {
            const c = DATA.crypto[sym];
            const isUp = c.change >= 0;
            const item = document.createElement('div');
            item.className = 'crypto-item';
            item.onclick = () => openModal('crypto', sym);
            item.innerHTML = `
                <div class="name">${sym}</div>
                <div class="sub">${c.name}</div>
                <div class="row">
                    <span class="price">$${(c.value/1000).toFixed(1)}K</span>
                    <span class="change ${isUp ? 'green' : 'red'}">${isUp ? '‚Üë' : '‚Üì'} ${Math.abs(c.change).toFixed(1)}%</span>
                </div>
            `;
            cryptoGrid.appendChild(item);
        });
        
        // Render ME news
        const newsList = document.getElementById('news-list');
        DATA.meNews.forEach((n, idx) => {
            const item = document.createElement('div');
            item.className = 'news-item';
            item.onclick = () => openModal('menews', idx);
            item.innerHTML = `<div class="news-dot"></div><div class="news-text">${n.headline}</div>`;
            newsList.appendChild(item);
        });
        
        // Render market news
        const marketNewsList = document.getElementById('market-news');
        DATA.marketNews.forEach(n => {
            const item = document.createElement('div');
            item.className = 'news-item';
            item.innerHTML = `<div class="news-dot" style="background:var(--accent-cyan)"></div><div class="news-text">${n.headline} <span style="color:var(--accent-cyan);font-size:0.7rem">${n.source}</span></div>`;
            marketNewsList.appendChild(item);
        });
        
        // Modal
        function openModal(type, id) {
            const overlay = document.getElementById('modal-overlay');
            const title = document.getElementById('modal-title');
            const subtitle = document.getElementById('modal-subtitle');
            const body = document.getElementById('modal-body');
            const sources = document.getElementById('modal-sources');
            
            if (type === 'stock') {
                const d = DATA.stocks[id];
                const value = d.shares * d.price;
                const totalBuy = d.sentiment.buy + d.sentiment.hold + d.sentiment.sell || 1;
                const buyPct = (d.sentiment.buy / totalBuy * 100).toFixed(0);
                const holdPct = (d.sentiment.hold / totalBuy * 100).toFixed(0);
                const sellPct = (d.sentiment.sell / totalBuy * 100).toFixed(0);
                
                title.textContent = `${id} ‚Äî ${d.name}`;
                subtitle.textContent = `${d.shares.toFixed(2)} shares ¬∑ $${(value/1000).toFixed(1)}K value ¬∑ ${d.change >= 0 ? '+' : ''}${d.change.toFixed(2)}% today`;
                
                body.innerHTML = `
                    <div class="modal-section"><h4>Key Metrics</h4>
                        <div class="modal-stats">
                            <div class="modal-stat"><div class="label">Mkt Cap</div><div class="value">${d.marketCap}</div></div>
                            <div class="modal-stat"><div class="label">P/E</div><div class="value">${d.pe}</div></div>
                            <div class="modal-stat"><div class="label">${d.type === 'ETF' ? 'Expense' : 'EPS'}</div><div class="value">${d.type === 'ETF' ? d.expenseRatio : d.eps}</div></div>
                            <div class="modal-stat"><div class="label">52W High</div><div class="value">${d.weekHigh}</div></div>
                        </div>
                    </div>
                    <div class="modal-section"><h4>Technical Analysis</h4>
                        <p><strong>Trend:</strong> ${d.technical.trend} ¬∑ <strong>RSI:</strong> ${d.technical.rsi} ¬∑ <strong>Signal:</strong> ${d.technical.signal}</p>
                        <div class="tech-levels">
                            <div class="tech-level"><span class="label">Support</span><span class="value">${d.technical.support}</span></div>
                            <div class="tech-level"><span class="label">Resistance</span><span class="value">${d.technical.resistance}</span></div>
                            <div class="tech-level"><span class="label">50-day MA</span><span class="value">${d.technical.sma50}</span></div>
                            <div class="tech-level"><span class="label">200-day MA</span><span class="value">${d.technical.sma200}</span></div>
                        </div>
                    </div>
                    <div class="modal-section"><h4>Sentiment Analysis</h4>
                        <p><strong>Rating:</strong> ${d.sentiment.rating} ¬∑ <strong>Targets:</strong> ${d.sentiment.lowTarget} ‚Üí ${d.sentiment.avgTarget} ‚Üí ${d.sentiment.highTarget}</p>
                        ${d.sentiment.buy > 0 ? `<div class="sentiment-bar"><div class="bar buy" style="flex:${buyPct}"></div><div class="bar hold" style="flex:${holdPct}"></div><div class="bar sell" style="flex:${sellPct}"></div></div><div class="sentiment-labels"><span>Buy ${buyPct}%</span><span>Hold ${holdPct}%</span><span>Sell ${sellPct}%</span></div>` : ''}
                        <p style="margin-top:10px">${d.sentiment.summary}</p>
                    </div>
                    <div class="modal-section"><h4>Top 3 News</h4>${d.news.map(n => `<div class="news-card"><div class="headline">${n.headline}</div><div class="meta"><span class="source">${n.source}</span><span>${n.time}</span></div></div>`).join('')}</div>
                `;
                sources.innerHTML = `<h4>Sources</h4>${d.sources.map(s => `<a href="${s.url}" target="_blank">${s.name} ‚Üó</a>`).join('')}`;
            } else if (type === 'crypto') {
                const d = DATA.crypto[id];
                title.textContent = `${id} ‚Äî ${d.name}`;
                subtitle.textContent = `$${d.value.toLocaleString()} value ¬∑ ${d.change >= 0 ? '+' : ''}${d.change.toFixed(2)}%`;
                body.innerHTML = `
                    <div class="modal-section"><h4>Technical</h4><p><strong>Trend:</strong> ${d.technical.trend} ¬∑ <strong>RSI:</strong> ${d.technical.rsi} ¬∑ <strong>Support:</strong> ${d.technical.support} ¬∑ <strong>Resistance:</strong> ${d.technical.resistance}</p></div>
                    <div class="modal-section"><h4>Sentiment</h4><p>${d.sentiment}</p></div>
                    ${d.news.length ? `<div class="modal-section"><h4>Recent News</h4>${d.news.map(n => `<div class="news-card"><div class="headline">${n.headline}</div><div class="meta"><span class="source">${n.source}</span><span>${n.time}</span></div></div>`).join('')}</div>` : ''}
                `;
                sources.innerHTML = d.sources.length ? `<h4>Sources</h4>${d.sources.map(s => `<a href="${s.url}" target="_blank">${s.name} ‚Üó</a>`).join('')}` : '';
            } else if (type === 'menews') {
                const d = DATA.meNews[id];
                title.textContent = 'Middle East Analysis';
                subtitle.textContent = 'Deep dive';
                body.innerHTML = `
                    <div class="modal-section"><h4>Headline</h4><p style="color:var(--text-primary);font-size:1.05rem;font-weight:500">${d.headline}</p></div>
                    <div class="modal-section"><h4>Summary</h4><p>${d.summary}</p></div>
                    <div class="modal-section"><h4>Context</h4><p>${d.context}</p></div>
                    <div class="modal-section"><h4>Related</h4>${d.related.map(r => `<div class="news-card"><div class="headline">${r.headline}</div><div class="meta"><span class="source">${r.source}</span></div></div>`).join('')}</div>
                `;
                sources.innerHTML = `<h4>Sources</h4>${d.sources.map(s => `<a href="${s.url}" target="_blank">${s.name} ‚Üó</a>`).join('')}`;
            }
            overlay.classList.add('active');
        }
        
        function closeModal() { document.getElementById('modal-overlay').classList.remove('active'); }
        document.getElementById('modal-overlay').addEventListener('click', function(e) { if (e.target === this) closeModal(); });
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeModal(); });
    </script>
</body>
</html>
